# LanQiaoCup_12_2
# 蓝桥杯单片机第十二届省赛题
第一眼看真是没什么特别难的感觉，就是一个长按键还没有想到解决方法，先从四个按键入手，S4按键切换三个模式，一开始我用的是递归，在四个while循环，直接把整个程序写死在一个函数里面了，也是迫不得已，当时也没想出什么好方法，S5是电压模式切换，这个就是两个模式切换，简单，S6是读取电压值，一看到保存数据，我直接写了个eeprom，后来一想，没必要那么麻烦，直接保存在一个中间变量进行比较就好，S7也是一样的思路。
到了LED的部分，这个一开始我把所有的LED都写到数码管显示的函数里面了，但是注意了，长按S7是可以关闭LED的，但是关闭LED不影响数码管，这就看出来我的代码有很大问题了，所以要记住，LED一定不要和数码管显示放在一个函数里面。
关于长按怎么做，我这里是大佬教我的，用的定时器2，计时1ms，使变量count_led++,如果count_led=1000后，计时1s，把count_led置为0，然后另一个变量，设一个新变量count_S7每1s自加1，这样的话，定时器中断就设置完毕了，接下来就是S7的长按功能，当S7被按下后，使count_led和count_S7都置0，接下来就进行判断，如果count_S7>=1，判断灯的状态，我们设变量aaa灯亮aaa为0，灯灭aaa为1，如果aaa<1则aaa++，把灯灭掉，else aaa=0，让灯亮，这就实现了长按，看文字描述还是不是很懂，要看代码才行。
